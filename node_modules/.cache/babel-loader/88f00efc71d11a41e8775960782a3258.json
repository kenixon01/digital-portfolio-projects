{"ast":null,"code":"'use strict';\n\nconst AuthProvider = require('./auth_provider').AuthProvider;\nclass X509 extends AuthProvider {\n  prepare(handshakeDoc, authContext, callback) {\n    const credentials = authContext.credentials;\n    Object.assign(handshakeDoc, {\n      speculativeAuthenticate: x509AuthenticateCommand(credentials)\n    });\n    callback(undefined, handshakeDoc);\n  }\n  auth(authContext, callback) {\n    const connection = authContext.connection;\n    const credentials = authContext.credentials;\n    const response = authContext.response;\n    if (response.speculativeAuthenticate) {\n      return callback();\n    }\n    connection.command('$external.$cmd', x509AuthenticateCommand(credentials), callback);\n  }\n}\nfunction x509AuthenticateCommand(credentials) {\n  const command = {\n    authenticate: 1,\n    mechanism: 'MONGODB-X509'\n  };\n  if (credentials.username) {\n    Object.assign(command, {\n      user: credentials.username\n    });\n  }\n  return command;\n}\nmodule.exports = X509;","map":{"version":3,"names":["AuthProvider","require","X509","prepare","handshakeDoc","authContext","callback","credentials","Object","assign","speculativeAuthenticate","x509AuthenticateCommand","undefined","auth","connection","response","command","authenticate","mechanism","username","user","module","exports"],"sources":["C:/Users/minix/Documents/GitHub/digital-portfolio-projects/digital-portfolio-projects/node_modules/mongodb/lib/core/auth/x509.js"],"sourcesContent":["'use strict';\nconst AuthProvider = require('./auth_provider').AuthProvider;\n\nclass X509 extends AuthProvider {\n  prepare(handshakeDoc, authContext, callback) {\n    const credentials = authContext.credentials;\n    Object.assign(handshakeDoc, {\n      speculativeAuthenticate: x509AuthenticateCommand(credentials)\n    });\n\n    callback(undefined, handshakeDoc);\n  }\n\n  auth(authContext, callback) {\n    const connection = authContext.connection;\n    const credentials = authContext.credentials;\n    const response = authContext.response;\n    if (response.speculativeAuthenticate) {\n      return callback();\n    }\n\n    connection.command('$external.$cmd', x509AuthenticateCommand(credentials), callback);\n  }\n}\n\nfunction x509AuthenticateCommand(credentials) {\n  const command = { authenticate: 1, mechanism: 'MONGODB-X509' };\n  if (credentials.username) {\n    Object.assign(command, { user: credentials.username });\n  }\n\n  return command;\n}\n\nmodule.exports = X509;\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,YAAY,GAAGC,OAAO,CAAC,iBAAiB,CAAC,CAACD,YAAY;AAE5D,MAAME,IAAI,SAASF,YAAY,CAAC;EAC9BG,OAAO,CAACC,YAAY,EAAEC,WAAW,EAAEC,QAAQ,EAAE;IAC3C,MAAMC,WAAW,GAAGF,WAAW,CAACE,WAAW;IAC3CC,MAAM,CAACC,MAAM,CAACL,YAAY,EAAE;MAC1BM,uBAAuB,EAAEC,uBAAuB,CAACJ,WAAW;IAC9D,CAAC,CAAC;IAEFD,QAAQ,CAACM,SAAS,EAAER,YAAY,CAAC;EACnC;EAEAS,IAAI,CAACR,WAAW,EAAEC,QAAQ,EAAE;IAC1B,MAAMQ,UAAU,GAAGT,WAAW,CAACS,UAAU;IACzC,MAAMP,WAAW,GAAGF,WAAW,CAACE,WAAW;IAC3C,MAAMQ,QAAQ,GAAGV,WAAW,CAACU,QAAQ;IACrC,IAAIA,QAAQ,CAACL,uBAAuB,EAAE;MACpC,OAAOJ,QAAQ,EAAE;IACnB;IAEAQ,UAAU,CAACE,OAAO,CAAC,gBAAgB,EAAEL,uBAAuB,CAACJ,WAAW,CAAC,EAAED,QAAQ,CAAC;EACtF;AACF;AAEA,SAASK,uBAAuB,CAACJ,WAAW,EAAE;EAC5C,MAAMS,OAAO,GAAG;IAAEC,YAAY,EAAE,CAAC;IAAEC,SAAS,EAAE;EAAe,CAAC;EAC9D,IAAIX,WAAW,CAACY,QAAQ,EAAE;IACxBX,MAAM,CAACC,MAAM,CAACO,OAAO,EAAE;MAAEI,IAAI,EAAEb,WAAW,CAACY;IAAS,CAAC,CAAC;EACxD;EAEA,OAAOH,OAAO;AAChB;AAEAK,MAAM,CAACC,OAAO,GAAGpB,IAAI"},"metadata":{},"sourceType":"script"}